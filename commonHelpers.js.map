{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"42148811-877485cb71de5bd48342bfa16\";\n\nconst form = document.querySelector(\"#form\");\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nhideLoader()\nform.addEventListener(\"submit\", handleSearch);\n\nfunction handleSearch(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    const images = form.elements.images.value;\n    \n    gallery.innerHTML = '';\n\n    if (!images.trim()) {\n        iziToast.show({\n            message: `Please, fill in the search field`,                    \n            messageColor: 'white',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n            timeout: 4000,\n        });\n        return;\n    }\n    showLoader();\n    searchImages(images)\n        .then((data) => {\n            if (data.hits.length === 0) {\n                iziToast.show({                   \n                    message: `Sorry, there are no images matching your search query.`,                    \n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    position: 'topRight',\n                    timeout: 4000,\n                });\n                return;\n            }\n            \n            gallery.innerHTML = createImagesMarkup(data.hits);\n\n            lightbox.refresh();\n            \n         \n        })\n       .catch(error => {\n      console.error(error);\n    })\n        .finally(() => {\n        hideLoader();\n      });\n\n\n    event.currentTarget.reset();\n}\n\nfunction searchImages(images) {\n    \n    const urlParams = new URLSearchParams({\n       key: API_KEY,\n        q: images,\n        type: \"photo\",\n        orientation: \"horizontal\",\n    safesearch: true,\n    })\n    \n            return fetch(`${BASE_URL}?${urlParams}`).then((res) => {\n        if (!res.ok) {\n            throw new Error(res.status)\n        }\n        return res.json();\n    });\n}\n\nfunction createImagesMarkup (arr) {\n    return arr.map(\n         ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) =>\n      `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          width=\"360\"\n        />\n      </a>\n      <div class=\"info-block\">\n        <div class=\"block\">\n          <h2 class=\"title\">Likes</h2>\n          <p class=\"amount\">${likes}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Views</h2>\n          <p class=\"amount\">${views}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Comments</h2>\n          <p class=\"amount\">${comments}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Downloads</h2>\n          <p class=\"amount\">${downloads}</p>\n        </div>\n      </div>\n    </li>`\n    ).join('');\n};\n\nfunction showLoader() {\n  if (loader) {\n    loader.style.display = 'block';\n  }\n}\n\nfunction hideLoader() {\n  if (loader) {\n    loader.style.display = 'none';\n  }\n}"],"names":["BASE_URL","API_KEY","form","gallery","loader","lightbox","SimpleLightbox","hideLoader","handleSearch","event","images","iziToast","showLoader","searchImages","data","createImagesMarkup","error","urlParams","res","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EACDC,EAAY,EACZL,EAAK,iBAAiB,SAAUM,CAAY,EAE5C,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EAGpB,MAAMC,EADOD,EAAM,cACC,SAAS,OAAO,MAIpC,GAFAN,EAAQ,UAAY,GAEhB,CAACO,EAAO,OAAQ,CAChBC,EAAS,KAAK,CACV,QAAS,mCACT,aAAc,QACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACrB,CAAS,EACD,MACH,CACDC,IACAC,EAAaH,CAAM,EACd,KAAMI,GAAS,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CACxBH,EAAS,KAAK,CACV,QAAS,yDACT,aAAc,QACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GAC7B,CAAiB,EACD,MACH,CAEDR,EAAQ,UAAYY,EAAmBD,EAAK,IAAI,EAEhDT,EAAS,QAAO,CAG5B,CAAS,EACD,MAAMW,GAAS,CACjB,QAAQ,MAAMA,CAAK,CACzB,CAAK,EACI,QAAQ,IAAM,CACfT,GACR,CAAO,EAGHE,EAAM,cAAc,OACxB,CAEA,SAASI,EAAaH,EAAQ,CAE1B,MAAMO,EAAY,IAAI,gBAAgB,CACnC,IAAKhB,EACJ,EAAGS,EACH,KAAM,QACN,YAAa,aACjB,WAAY,EAChB,CAAK,EAEO,OAAO,MAAM,GAAGV,KAAYiB,GAAW,EAAE,KAAMC,GAAQ,CAC3D,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE9B,OAAOA,EAAI,MACnB,CAAK,CACL,CAEA,SAASH,EAAoBI,EAAK,CAC9B,OAAOA,EAAI,IACN,CAAC,CACF,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACC,IACH;AAAA;AAAA,sCAEgCL;AAAA;AAAA;AAAA,iBAGrBD;AAAA,iBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAOaC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA,UAI9B,EAAM,KAAK,EAAE,CACb,CAEA,SAASd,GAAa,CAChBR,IACFA,EAAO,MAAM,QAAU,QAE3B,CAEA,SAASG,GAAa,CAChBH,IACFA,EAAO,MAAM,QAAU,OAE3B"}